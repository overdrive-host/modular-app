<div class="pacientesimplantes-container">
    <h1>Pacientes Implantes</h1>

    <!-- Formulario de ingreso -->
    <div class="form-container">
        <form id="paciente-form">
            <div class="row">
                <div class="form-group">
                    <label for="atributo">Atributo</label>
                    <select id="atributo" name="atributo" required autocomplete="off">
                        <option value="Implantes">Implantes</option>
                        <option value="Instrumental">Instrumental</option>
                        <option value="Otros">Otros</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="prevision">Previsión</label>
                    <input type="text" id="prevision" name="prevision" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label for="convenio">Convenio</label>
                    <input type="text" id="convenio" name="convenio" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label for="admision">Admisión</label>
                    <input type="text" id="admision" name="admision" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label for="nombrePaciente">Nombre del Paciente</label>
                    <input type="text" id="nombrePaciente" name="nombrePaciente" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label for="medico">Médico</label>
                    <div class="autocomplete">
                        <input type="text" id="medico" name="medico" required autocomplete="off">
                        <div id="medico-autocomplete-list" class="autocomplete-items"></div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="form-group">
                    <label for="fechaCX">Fecha de Cx</label>
                    <input type="date" id="fechaCX" name="fechaCX" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label for="proveedor">Proveedor</label>
                    <div class="input-with-icon">
                        <input type="text" id="proveedor" name="proveedor" required autocomplete="off">
                        <i class="fas fa-list icon-list"></i>
                        <ul id="proveedor-suggestions" class="suggestions-list"></ul>
                    </div>
                </div>
                <div class="form-group">
                    <label for="estado">Estado</label>
                    <select id="estado" name="estado" required autocomplete="off">
                        <option value="Actualizar Precio">Actualizar Precio</option>
                        <option value="Agendado">Agendado</option>
                        <option value="Cargado">Cargado</option>
                        <option value="Cargo Pendiente">Cargo Pendiente</option>
                        <option value="Código Pendiente">Código Pendiente</option>
                        <option value="Cotización Pendiente">Cotización Pendiente</option>
                        <option value="Cuenta Cerrada">Cuenta Cerrada</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="fechaCargo">Fecha de Cargo</label>
                    <input type="date" id="fechaCargo" name="fechaCargo" autocomplete="off">
                </div>
                <div class="form-group">
                    <label for="informe">Informe</label>
                    <select id="informe" name="informe" autocomplete="off">
                        <option value="Sí">Sí</option>
                        <option value="No">No</option>
                        <option value="Consignación">Consignación</option>
                    </select>
                </div>
                <div class="form-group">
                    <label> </label> <!-- Etiqueta vacía para alineación -->
                    <button type="submit" class="modal-btn confirm-btn">Agregar Paciente</button>
                </div>
            </div>
        </form>
    </div>

    <!-- Filtros rápidos -->
    <div class="quick-filters">
        <label for="filter-year">Año:</label>
        <select id="filter-year"></select>
        <label for="filter-month">Mes:</label>
        <select id="filter-month"></select>
        <button id="show-all-btn">Mostrar Todos</button>
        <div id="state-buttons"></div>
        <button id="export-excel-btn">Exportar a Excel</button>
    </div>

    <!-- Tabla de pacientes -->
    <div class="table-container">
        <table id="pacientesimplantes-table">
            <thead>
                <tr>
                    <th>Acciones</th>
                    <th>Fecha Creación <i class="fas fa-filter filter-icon" data-column="fechaIngreso"></i></th>
                    <th>Atributo <i class="fas fa-filter filter-icon" data-column="atributo"></i></th>
                    <th>Previsión <i class="fas fa-filter filter-icon" data-column="prevision"></i></th>
                    <th>Convenio <i class="fas fa-filter filter-icon" data-column="convenio"></i></th>
                    <th>Admisión <i class="fas fa-filter filter-icon" data-column="admision"></i></th>
                    <th>Nombre del Paciente <i class="fas fa-filter filter-icon" data-column="nombrePaciente"></i></th>
                    <th>Médico <i class="fas fa-filter filter-icon" data-column="medico"></i></th>
                    <th>Fecha de Cx <i class="fas fa-filter filter-icon" data-column="fechaCX"></i></th>
                    <th>Proveedor <i class="fas fa-filter filter-icon" data-column="proveedor"></i></th>
                    <th>Estado <i class="fas fa-filter filter-icon" data-column="estado"></i></th>
                    <th>Fecha de Cargo <i class="fas fa-filter filter-icon" data-column="fechaCargo"></i></th>
                    <th>Informe <i class="fas fa-filter filter-icon" data-column="informe"></i></th>
                    <th>Total Cotización <i class="fas fa-filter filter-icon" data-column="totalCotizacion"></i></th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <!-- Paginación -->
    <div class="pagination-container">
        <button id="prev-btn">Anterior</button>
        <span id="page-info">Página 1 de 1</span>
        <button id="next-btn">Siguiente</button>
        <span id="total-records">Total de registros: 0</span>
    </div>

    <!-- Modal de edición -->
    <div id="edit-paciente-modal" class="modal" hidden>
        <div class="modal-content">
            <h3>Editar Paciente</h3>
            <form id="edit-paciente-form">
                <div class="row">
                    <div class="form-group">
                        <label for="edit-atributo">Atributo</label>
                        <select id="edit-atributo" name="edit-atributo" autocomplete="off">
                            <option value="Implantes">Implantes</option>
                            <option value="Instrumental">Instrumental</option>
                            <option value="Otros">Otros</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="edit-prevision">Previsión</label>
                        <input type="text" id="edit-prevision" name="edit-prevision" required autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label for="edit-convenio">Convenio</label>
                        <input type="text" id="edit-convenio" name="edit-convenio" required autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label for="edit-admision">Admisión</label>
                        <input type="text" id="edit-admision" name="edit-admision" required autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label for="edit-nombrePaciente">Nombre del Paciente</label>
                        <input type="text" id="edit-nombrePaciente" name="edit-nombrePaciente" required
                            autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label for="edit-medico">Médico</label>
                        <div class="autocomplete">
                            <input type="text" id="edit-medico" name="edit-medico" required autocomplete="off">
                            <div id="edit-medico-autocomplete-list" class="autocomplete-items"></div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group">
                        <label for="edit-fechaCX">Fecha de Cx</label>
                        <input type="date" id="edit-fechaCX" name="edit-fechaCX" required autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label for="edit-proveedor">Proveedor</label>
                        <div class="input-with-icon">
                            <input type="text" id="edit-proveedor" name="edit-proveedor" required autocomplete="off">
                            <i class="fas fa-list icon-list"></i>
                            <ul id="edit-proveedor-suggestions" class="suggestions-list"></ul>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="edit-estado">Estado</label>
                        <select id="edit-estado" name="edit-estado" autocomplete="off">
                        <option value="Actualizar Precio">Actualizar Precio</option>
                        <option value="Agendado">Agendado</option>
                        <option value="Cargado">Cargado</option>
                        <option value="Cargo Pendiente">Cargo Pendiente</option>
                        <option value="Código Pendiente">Código Pendiente</option>
                        <option value="Cotización Pendiente">Cotización Pendiente</option>
                        <option value="Cuenta Cerrada">Cuenta Cerrada</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="edit-fechaCargo">Fecha de Cargo</label>
                        <input type="date" id="edit-fechaCargo" name="edit-fechaCargo" autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label for="edit-informe">Informe</label>
                        <select id="edit-informe" name="edit-informe" autocomplete="off">
                            <option value="Sí">Sí</option>
                            <option value="No">No</option>
                            <option value="Consignación">Consignación</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="edit-totalCotización">Total Cotización</label>
                        <input type="text" id="edit-totalCotización" name="edit-totalCotización" autocomplete="off">
                    </div>
                </div>
                <div class="modal-buttons">
                    <button type="button" class="modal-btn confirm-btn" id="save-edit-btn">Guardar</button>
                    <button type="button" class="modal-btn cancel-btn" id="cancel-edit-btn">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de eliminación -->
    <div id="delete-paciente-modal" class="modal small-modal" hidden>
        <div class="modal-content">
            <h3>Confirmar Eliminación</h3>
            <p id="delete-message"></p>
            <div class="modal-buttons">
                <button id="confirm-delete-btn" class="modal-btn confirm-btn">Eliminar</button>
                <button id="cancel-delete-btn" class="modal-btn cancel-btn">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal de logs -->
    <div id="log-modal" class="modal" hidden>
        <div class="modal-content">
            <h3>Historial</h3>
            <div id="log-content"></div>
            <div class="modal-buttons">
                <button id="close-log-btn" class="modal-btn cancel-btn">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Modal de éxito/error -->
    <div id="success-modal" class="modal" hidden>
        <div class="modal-content">
            <i id="success-icon" class="fas fa-check-circle"></i>
            <span id="success-message"></span>
        </div>
    </div>

    <!-- Modal de cambio de estado -->
    <div id="change-state-modal" class="modal small-modal" hidden>
        <div class="modal-content">
            <h3>Cambiar Estado</h3>
            <form id="change-state-form">
                <div class="form-group">
                    <label for="change-state-select">Estado</label>
                    <select id="change-state-select" name="change-state-select" autocomplete="off">
                        <option value="Actualizar Precio">Actualizar Precio</option>
                        <option value="Agendado">Agendado</option>
                        <option value="Cargado">Cargado</option>
                        <option value="Cargo Pendiente">Cargo Pendiente</option>
                        <option value="Código Pendiente">Código Pendiente</option>
                        <option value="Cotización Pendiente">Cotización Pendiente</option>
                        <option value="Cuenta Cerrada">Cuenta Cerrada</option>
                    </select>
                </div>
                <div class="modal-buttons">
                    <button type="button" class="modal-btn confirm-btn" id="save-state-btn">Guardar</button>
                    <button type="button" class="modal-btn cancel-btn" id="cancel-state-btn">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Indicador de carga -->
    <div id="loading-spinner" style="display: none; text-align: center; padding: 20px;">Cargando...</div>
</div>